{% extends "base.html" %}
{% block content %}

<h1 class="fw-bold mb-4">G√©n√©rer un document</h1>

<ul class="nav nav-tabs mb-4">
    <li class="nav-item">
        <a class="nav-link active" data-bs-toggle="tab" href="#commande">Bon de commande</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" data-bs-toggle="tab" href="#rapport">Rapport d'activit√©</a>
    </li>
</ul>

<div class="tab-content">

    <!-- =======================
         ONGLET BON DE COMMANDE
    ======================== -->
    <div class="tab-pane fade show active" id="commande">

        <!-- FORMULAIRE -->
        <form method="POST" action="{{ url_for('generate_pdf') }}">

            <div class="container-fluid">
                <div class="row">
                    {% set half = (products|length // 2) + (products|length % 2) %}

                    <!-- COLONNE GAUCHE -->
                    <div class="col-md-6">
                        <table class="table table-sm table-bordered" style="font-size:0.8rem;">
                            <thead class="table-light">
                                <tr>
                                    <th style="width: 90px;">R√©f√©rence</th>
                                    <th style="width: 250px;">D√©signation</th>
                                    <th style="width: 70px;">Qt√©</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for ref, label in products[:half] %}
                                <tr>
                                    <td>{{ ref }}</td>
                                    <td>{{ label }}</td>
                                    <td>
                                        <input type="number" min="0" name="{{ ref }}" 
                                               class="form-control form-control-sm" 
                                               style="width:70px;">
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>

                    <!-- COLONNE DROITE -->
                    <div class="col-md-6">
                        <table class="table table-sm table-bordered" style="font-size:0.8rem;">
                            <thead class="table-light">
                                <tr>
                                    <th style="width: 90px;">R√©f√©rence</th>
                                    <th style="width: 250px;">D√©signation</th>
                                    <th style="width: 70px;">Qt√©</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for ref, label in products[half:] %}
                                <tr>
                                    <td>{{ ref }}</td>
                                    <td>{{ label }}</td>
                                    <td>
                                        <input type="number" min="0" name="{{ ref }}" 
                                               class="form-control form-control-sm" 
                                               style="width:70px;">
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>

                </div>
            </div>

            <!-- BOUTON -->
            <div class="text-center my-4">
                <button class="btn btn-success btn-lg px-5">
                    üìÑ G√©n√©rer le PDF
                </button>
            </div>

        </form>
    </div>


    <!-- =======================
         ONGLET RAPPORT (VIDE)
    ======================== -->
    <div class="tab-pane fade" id="rapport">
        <div class="alert alert-info mt-4">
            Le g√©n√©rateur de rapport d'activit√© sera ajout√© bient√¥t.
        </div>
    </div>

</div>

{% endblock %}

{% extends "base.html" %}
{% block content %}

<h2>Confirmation du rapport d‚Äôactivit√© ‚Äì {{ month }}/{{ year }}</h2>

<p class="text-muted">V√©rifiez les valeurs avant g√©n√©ration du PDF.</p>

<form method="POST" action="{{ url_for('generate_activity_report') }}">

    <input type="hidden" name="month" value="{{ month }}">
    <input type="hidden" name="year" value="{{ year }}">

    <div class="row">

        <!-- ------------------------------- -->
        <!--            ENTR√âES             -->
        <!-- ------------------------------- -->
        <div class="col-md-6">
            <div class="card mb-3">
                <div class="card-header fw-bold">
                    Entr√©es
                </div>
                <div class="card-body">

                    {% set labels_entries = {
                        "entries_abandon": "Abandons",
                        "entries_return": "Retours apr√®s placement",
                        "entries_found": "Trouv√©s",
                        "entries_total": "Total des entr√©es",
                        "count_start": "Nombre d‚Äôanimaux en d√©but de mois"
                    } %}

                    {% for key, value in counts.items() %}
                        {% if key in labels_entries %}
                            <div class="d-flex justify-content-between">
                                <span>{{ labels_entries[key] }} :</span>
                                <strong>{{ value }}</strong>
                            </div>
                        {% endif %}
                    {% endfor %}

                </div>
            </div>
        </div>

        <!-- ------------------------------- -->
        <!--             SORTIES             -->
        <!-- ------------------------------- -->
        <div class="col-md-6">
            <div class="card mb-3">
                <div class="card-header fw-bold">
                    Sorties
                </div>
                <div class="card-body">

                    {% set labels_exits = {
                        "exits_placed": "Plac√©s",
                        "exits_returned_owner": "Rendus √† leur propri√©taire",
                        "exits_deceased": "D√©c√©d√©s",
                        "exits_escaped": "√âchapp√©s",
                        "exits_transferred": "Transf√©r√©s vers un autre √©tablissement",
                        "exits_total": "Total des sorties",
                        "count_end": "Nombre d‚Äôanimaux en fin de mois"
                    } %}

                    {% for key, value in counts.items() %}
                        {% if key in labels_exits %}
                            <div class="d-flex justify-content-between">
                                <span>{{ labels_exits[key] }} :</span>
                                <strong>{{ value }}</strong>
                            </div>
                        {% endif %}
                    {% endfor %}

                </div>
            </div>
        </div>

    </div>

    <!-- Champs cach√©s -->
    {% for k, v in counts.items() %}
        <input type="hidden" name="{{ k }}" value="{{ v }}">
    {% endfor %}

    <button class="btn btn-primary btn-lg">üìÑ G√©n√©rer le PDF</button>
    <a href="{{ url_for('documents') }}" class="btn btn-secondary btn-lg">Annuler</a>

</form>

{% endblock %}

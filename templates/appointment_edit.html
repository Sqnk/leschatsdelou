{% extends "base.html" %}

{% block content %}
<div class="container mt-4">

    <h2>Modifier le rendez-vous</h2>

    <form method="POST">
        
        <!-- DATE -->
        <div class="mb-3">
            <label class="form-label">Date et heure</label>
            <input type="datetime-local" name="date" class="form-control"
                   value="{{ appt.date.strftime('%Y-%m-%dT%H:%M') }}">
        </div>

        <!-- LIEU -->
        <div class="mb-3">
            <label class="form-label">Lieu</label>
            <input type="text" name="location" class="form-control"
                   value="{{ appt.location }}">
        </div>

        <hr>

        <!-- CHATS -->
        <h4>Chats associÃ©s</h4>
        <div class="row">
            {% for c in cats %}
            <div class="col-6 col-md-4">
                <label>
                    <input type="checkbox" name="cats[]" value="{{ c.id }}"
                           {% if c.id in [ac.cat_id for ac in appt.cats] %}checked{% endif %}>
                    {{ c.name }}
                </label>
            </div>
            {% endfor %}
        </div>

        <hr>

        <!-- EMPLOYÃ‰S -->
        <h4>EmployÃ©s associÃ©s</h4>
        <div class="row">
            {% for e in employees %}
            <div class="col-6 col-md-4">
                <label>
                    <input type="checkbox" name="employees[]" value="{{ e.id }}"
                           {% if e.id in [ae.employee_id for ae in appt.employees] %}checked{% endif %}>
                    {{ e.name }}
                </label>
            </div>
            {% endfor %}
        </div>

        <hr>

        <button class="btn btn-primary mt-3">ðŸ’¾ Enregistrer</button>
        <a href="{{ url_for('appointments_page') }}" class="btn btn-secondary mt-3">Annuler</a>
    </form>

</div>
{% endblock %}
